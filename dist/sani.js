var Animator=function(){'use strict';var v=Math.sqrt;var b=Math.round;var _=Math.floor;var k=Math.min;var $=Math.max;function l(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function d(e,t){return t={exports:{}},e(t,t.exports),t.exports}function p(e,t){const i=$(e,t);const r=k(e,t);let s=i;for(;0!=s%r;)s+=i;return s}function h(e){if(2===e.degree)return e.throws;const t=[];const r=p(e.throws.length,2);for(let s=0;s<r;s++){const i=[[],[]];const r=e.throws[s%e.throws.length][0].map(e=>({value:e.value,from:s%2,to:(s+e.value)%2}));i[s%2]=r,t.push(i)}return t}function u(e,t,i){return $(t,k(i,e))}function c(e,t){var i=Math.abs;const r=Array(t.props).fill().map(()=>new X(e.ballColor));const s=e.beatDuration*t.degree;let a=0;let o=0;const l=250;const d=350-200*i(.5-e.dwell)+15*(t.greatestValue-3);const c=500+d;const f=3-t.degree;const g=.1*f;const m=$(g,k(.9*f,e.dwell*f));const y=h(t);const v=p(y.length,t.strictStates.length);for(let n=0;n<v;n++){const d=y[n%y.length];const p=t.strictStates[n%t.strictStates.length];const f=d.map(e=>e.reduce((e,t)=>{const i=`${t.value}-${t.to}`;return e[i]=(e[i]||0)+1,e},{}));const v=$(...f.map(e=>$(...Object.keys(e).map(t=>e[t]))));let b=m;if(1<=m){const e=f.reduce((e,t)=>$(e,t["1-0"]||0,t["1-1"]||0),0);0<e&&(b=1-g)}for(let n=0;2>n;n++){const h=d[n];const m=k(...h.map(({value:e})=>e));const y=Y.s(0,-J.y,.5*(m-b)*s);for(let d=0;d<h.length;d++){const x=h[d];if(0===x.value)continue;const w=r[p[n%t.degree][0][d]-1];const _=1===v?0:k(g,(b-g)/(v-1));const j=--f[n][`${x.value}-${x.to}`];let I=b-(v-1)*_;let E=_*j;let P=x.value-(E+I);I*=s,E*=s,P*=s;let F;let S;const C=u(l-100*i(.5-e.dwell),150,l)-(2===m?50:0);const A=.5*e.ballRadius;const T=k(1e3,500+30*t.greatestValue);const B=u(.5*I+20*t.greatestValue,A,T);let q=.3*B+.7*B*m/t.greatestValue;q=k(3*I,q),q=k(2===m?100:.5*y,q),F=0===x.from?0:c,S=0===x.from?C:c-C,e.reversed&&([F,S]=[S,F]),w.animations.push({type:"catch",duration:I,width:S-F,yModifier:q/ee.maximum().y,position:{x:F,y:0},getPosition:te.catch});const G=Y.s(0,-J.y,P/2);F=0===x.from?C:c-C,S=0===x.to?0:c,e.reversed&&(x.from===x.to?[F,S]=[S,F]:(F+=0===x.from?-C:C,S+=0===x.from?-C:C)),w.animations.push({type:"throw",duration:P,position:{x:F,y:0},velocity:{x:(S-F)/P,y:Y.v(0,-J.y,G)},acceleration:J,getPosition:te.throw}),0<E&&w.animations.push({type:"wait",duration:E,position:{x:S,y:0},getPosition:te.wait}),G>a&&(a=G),q>o&&(o=q)}}}const[n]=t.strictStates;for(const i of n)for(let e=0;e<i.length;e++)for(const t of i[e])r[t-1].animations[-1]={type:"wait",duration:e*s,position:{x:null,y:null},getPosition:te.wait};const b=a+o;return[r,{innerWidth:c,innerHeight:b,catchHeight:o}]}function f(e,t=!0){const i=e[re];const{canvas:r}=e.context;if(!i){const e=window.devicePixelRatio||1;const i=_(r.clientWidth*e);const s=_(r.clientHeight*e);if(t&&r.width===i&&r.height===s)return;r.width=i,r.height=s}const s=e[ie];const{context:a}=e;const{width:n,height:o}=r;const{innerWidth:l,innerHeight:d,catchHeight:p,ballRadius:h}=s;const u=$(0,k(n/(l+2*h),o/(d+2*h)));s.multiplier=u;const c={x:$(0,n-(l+2*h)*u),y:$(0,o-(d+2*h)*u)};const f={x:.5*c.x+h*u,y:.5*c.y+h*u};a.translate(f.x,o-f.y-p*u),a.scale(1,-1)}function g(e){e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()}function m(e,t){const{context:i}=e;const r=e[se];const s=e[ae];const a=e[ne];a||f(e),g(i);for(const a of s)e.paused||a.update(t/r.slowdown),a.draw(i,r)}function y(e,t){if(!e||!e.valid)throw new Error("Invalid siteswap.");const{width:i=300,height:r=600,fps:s=60,backgroundColor:a="#fff"}=t;const n=new Animator({width:i,height:r},t);const{canvas:o}=n.context;n.play(e),n[ve]=null,n.seek(0,!0),be||(be=URL.createObjectURL(new Blob(["// gif.worker.js 0.2.1 - https://github.com/jnordberg/gif.js\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require(\"./TypedNeuQuant.js\");var LZWEncoder=require(\"./LZWEncoder.js\");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv=\"\";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither=\"FloydSteinberg\";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes(\"GIF89a\")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace(\"-serpentine\",\"\"),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw\"Unknown dithering kernel: \"+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=this.dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes(\"NETSCAPE2.0\");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{\"./LZWEncoder.js\":2,\"./TypedNeuQuant.js\":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require(\"./GIFEncoder.js\");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setDispose(frame.dispose);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{\"./GIFEncoder.js\":1}]},{},[4]);\n\n"],{type:"application/javascript"})));const l=new me({workers:4,quality:10,workerScript:be,background:a});const{fullPeriod:d}=e;const{beatDuration:p,slowdown:h}=n[ye];const u=1e3/s;const c=b((d%2?2*d:d)*p*h/u);for(let r=0;r<c;r++)l.addFrame(o,{copy:!0,delay:u}),m(n,u);const f=new Promise((e,t)=>{try{l.on("finished",e),l.render()}catch(i){t(i)}});return f.then=function(e,t,i){return i&&l.on("progress",i),Promise.prototype.then.call(this,e,t)},f}var U="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window;var V=d(function(e){(function(t,i){e.exports=i()})(U,function(){var I=String.fromCharCode;function Z(t){if(!X(t))throw new L("Invalid throws structure.");const i=t.map(e=>e.map(()=>0));for(let r=0;r<t.length;r++){const s=t[r];for(const a of s)for(const e of a)i[r][e.from]++,i[(r+e.value)%t.length][e.to]--}if(i.some(e=>e.some(e=>0!==e)))throw new L("Invalid siteswap.")}function X(e){if(!Array.isArray(e)||!e.length)return!1;for(const t of e){if(!Array.isArray(t)||t.length!==e[0].length)return!1;if(t.some(e=>!Array.isArray(e)||!e.every(({value:e,from:i,to:r})=>void 0!==e&&void 0!==i&&void 0!==r&&i<t.length&&r<t.length)))return!1}return!0}function Y(t,i){if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],n=i[r];if(s.length!==n.length)return!1;for(let e=0;e<s.length;e++){const t=s[e],i=n[e];if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],a=i[r];if(s.value!==a.value||s.from!==a.from||s.to!==a.to)return!1}}}return!0}function a(t){for(let i=1,e=K(t.length/2);i<=e;i++)if(0==t.length%i){const r=t.slice(0,i);for(let s=i;s<t.length;s+=i){const e=t.slice(s,s+i);if(!Y(r,e))break;if(i+s===t.length)return t.length=i,t}}return t}function ee(t){const i=[];for(let e=0;e<t.degree;e++)i.push(Array(t.greatestValue).fill(0));if(0===t.greatestValue)return new M(i);const{throws:r}=t;let s=0;for(let a=-1;;a--){const e=r[(a%r.length+r.length)%r.length];for(const r of e)for(const e of r){const r=a+e.value;if(!(0>r)&&(i[e.to][r]++,s++,s===t.props)){let e=t.greatestValue;for(;i.every(t=>0===t[e-1]);)e--;for(let r=0;r<t.degree;r++)i[r].length=e;return new M(i)}}}}function d(e){const t=[],i=ee(e);let r=i;do for(const i of e.throws)t.push(r.schedule),r=r.advance(i);while(i!==r);return t}function f(t){const r=[],s=e(t.states[0]);let a=s;do for(const e of t.throws)r.push(a),a=h(a,e);while(!i(s,a));return r}function e(e){let t=0;return e.map(e=>e.map(e=>Array(e).fill().map(()=>++t)))}function h(t,i){const r=t.map(e=>e.slice(1).map(e=>[...e]));for(let s=0;s<i.length;s++){const a=i[s];if(a.length||!a.every(({value:e,to:t,from:i})=>0===e&&t===s&&i===s))for(let e=0;e<a.length;e++){const i=a[e];if(0>=i.value)continue;const s=t[i.from][0][e];for(let s=0;s<r.length;s++)for(let a=t[0].length-1;a<i.value;a++)r[s][a]||(r[s][a]=[]);r[i.to][i.value-1].push(s)}}return r}function i(t,i){if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],n=i[r];if(s.length!==n.length)return!1;for(let e=0;e<s.length;e++){const t=s[e],i=n[e];if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==i[e])return!1}}return!0}function j(t,i,r,s,a){const e=r[s][a];for(const n of e){if(0===n.value)continue;const a=(s+n.value)%r.length;i[a][n.to]===t||(i[a][n.to]=t,j(t,i,r,a,n.to))}}function g(t){if(0===t.greatestValue)return[t];const{throws:i,notation:r}=t,s=[],n=i.map(e=>e.map(()=>null));for(let e=0;e<i.length;e++){const t=i[e];for(let r=0;r<t.length;r++){const a=t[r];if(null===n[e][r]&&(1!==a.length||0!==a[0].value)){const t=[];j(t,n,i,e,r),s.push(t)}}}if(1===s.length)return[t];for(let e=0;e<i.length;e++){const t=i[e];for(const i of s)i.push(t.map((t,r)=>n[e][r]===i?t:[{value:0,from:r,to:r}]))}return s.map(e=>new Siteswap(e,r))}function l(t){const i=[],r=[...t.throws],s=[...t.states],{notation:a}=t;let e=0;for(let n=1;n<=s.length;n++)for(let o=n-1;o>=e;o--)if(s[n%s.length]===s[o]){if(0==o&&n===s.length)return i.length?(m(i,new Siteswap(r.slice(o,n),a)),i):[t];e==o?(m(i,new Siteswap(r.slice(o,n),a)),e=n):(m(i,new Siteswap(r.splice(o,n-o),a)),s.splice(o,n-o),n=e);break}return i}function m(e,t){e.every(e=>!e.equals(t))&&e.push(t)}function n(e){if("string"!=typeof e)throw new Error("Expected string.");const t=e.charCodeAt(0);if(65<=t&&90>=t)return 36+t-N.A;if(97<=t&&122>=t)return 10+t-N.a;throw new Error("Expected alphabetic letter in [a-Z] range.")}function o(e){if("number"!=typeof e)throw new Error("Expected number.");if(10<=e&&35>=e)return H(e+N.a-10);if(36<=e&&61>=e)return H(e+N.A-36);throw new Error("Expected number in [10-61] range.")}function p(e){if("string"!=typeof e)throw new Error("Expected string.");if(!/^[a-zA-Z]+$/.test(e))throw new Error("Expected alphabetic string.");return[...e].reduce((e,t,i,{length:r})=>e+(t.charCodeAt(0)-N.A+1)*26**(r-i-1),0)-1}function c(e){if("number"!=typeof e)throw new Error("Expected number.");if(0>e)throw new Error("Expected number in [0, \u221E) range.");e++;const t=[];for(;0<e;)t.push(H(N.A+(e-1)%26)),e=K((e-1)/26);return t.reverse().join("")}function r(e){return+e}function s(t,i){const r=D(t,i),s=k(t,i);let a=r;for(;0!=a%s;)a+=r;return a}function t(e){return e.concat(e.map(e=>e.map(e=>[...e]).reverse()))}function u(e){for(const t of e)for(const e of t)for(let t=0;t<e.length;t++)e[t]={value:e[t],from:0,to:0};return e}function v(e){for(const t of e)for(let i=0;i<t.length;i++){const r=t[i];for(let t=0;t<r.length;t++){const{value:s,cross:a}=r[t];r[t]={value:s/2,from:i,to:a?1-i:i}}}return e}function w(e){const t=e.map(({length:e})=>e).reduce(s),i=[];for(let r=0;r<t;r++){const t=e.map(e=>e[r%e.length]).map((e,t)=>e.map(({value:i,hand:r,offset:s})=>{const a=void 0===s?r:t+s;return{value:i,from:t,to:a}}));i.push(t)}return i}function x(e){const t=e.map(({length:e})=>e).reduce(s),i=[];for(let r=0;r<t;r++){const t=e.map(e=>e[r%e.length][0]).map((e,t)=>e.map(({value:e,pass:i})=>{!0===i&&(i=2-t);const r=null===i?t:i-1;return{value:e,from:t,to:r}}));i.push(t)}return i}function y(e){const t=e.map(({length:e})=>e).reduce(s),i=[];for(let r=0;r<t;r++){const t=Array.prototype.concat(...e.map(e=>e[r%e.length])).map((e,t)=>e.map(({value:i,pass:r,cross:s})=>{!0===r&&(r=2-K(t/2));const a=(null===r?t:2*(r-1)+t%2)+(s?t%2?-1:1:0);return{value:i/2,from:t,to:a}}));i.push(t)}return i}function q(e,t=null){if(null===t){const t={};return t.immutables=[],t.terminals=new Set,e=q(e,t),e.immutables=t.immutables,e.terminals=[...t.terminals],e}if(null===e)return e;if("string"==typeof e){if(!R[e])throw new Error("Parsing error.");return q(R[e],t)}if(Array.isArray(e))return{symbols:e.map(e=>q(e,t))};if(e.fixed&&!e.value&&t.immutables.push(e),e.tokenType)return t.terminals.add(e),e;if("object"!=typeof e)throw new Error("Parsing error.");if(e.symbol)e.symbol=q(e.symbol,t);else if(e.symbols)e.symbols=e.symbols.map(e=>q(e,t));else if(e.repeat)e.repeat=e.repeat.map(e=>q(e,t));else if(e.either)e.either=e.either.map(e=>q(e,t));else if(e.allow)e.either=[q(e.allow,t),null],delete e.allow;else throw new Error("Parsing error.");return e}function A(t,i){const r=new RegExp(t.sort((e,t)=>e.index-t.index).map(({regex:e})=>`(${e})`).join("|"),"y"),s=[];for(;r.lastIndex<i.length;){const a=r.exec(i);if(null===a)return null;const e=a.findIndex((e,t)=>t&&e);s.push({type:t[e-1].tokenType,value:a[e]})}return s}function B(t){let e;if(null===t)return null;if(t.tokenType){const i=T[ie];if(!i||i.type!==t.tokenType)return S;if(t.fixed)if(!t.value)t.value=i.value;else if(i.value!==t.value)return S;e=i.value,ie++}else if(t.symbol){if(e=B(t.symbol),e===S)return S;}else if(t.symbols){e=[];for(const i of t.symbols){const t=B(i);if(t===S)return S;e.push(t)}}else if(t.repeat){for(e=[];e.length<t.max;){const i=ie,r=B({symbols:t.repeat});if(r===S){ie=i;break}e.push(r)}if(e.length<t.min||e.length>t.max)return S}else if(t.either){for(const i of t.either){const r=ie,s=B(i);if(s===S){ie=r;continue}const{processor:a}=t;if(t.fixed)if(void 0===t.value)t.value=i;else if(i!==t.value)return S;return a?a(s):s}return S}return t.processor?t.processor(e):e}function b(e,t){if(!e||!R[e])throw new Error("Parsing error.");"function"==typeof R[e]&&(R[e]=q(R[e]()));const i=R[e];for(const r of i.immutables)delete r.value;if(ie=0,T=A(i.terminals,t),!T||!T.length)return null;const r=B(i);return r===S||ie!==T.length?null:r}function C(e){const t=e.map(({value:t,from:i,to:r})=>{const s=i%2==r%2?"":"x",a=r===i||r===i+(i%2?-1:1)?"":`p${K(r/2)+1}`;return`${2*t}${s}${a}`}).join(",");return 1<e.length?`[${t}]`:t}function E(e,t){if(t=t.reduce((e,t)=>e.concat(Array.isArray(re[t])?re[t]:t),[]),"object"==typeof e){const[i]=t;if(("string"!=typeof i||!re[i])&&null!==i)throw new L("Unsupported notation.");return{notation:i,throws:e}}if(t.some(e=>"string"!=typeof e||!re[e]))throw new L("Unsupported notation.");for(const i of t){const t=re[i].parse(e);if(t)return{notation:i,throws:t}}throw new L("Invalid syntax.")}function F(e){return e.every(e=>e.every((e,t,{length:i})=>1===e||0===e&&t===i-1))}function G(t,i,r){for(let s=0;s<t.length;s++){const a=(s+r)%t.length;if(t[a].length!==i[s].length)return!1;for(let e=0;e<t[a].length;e++){if(t[a][e].length!==i[s][e].length)return!1;for(let r=0;r<t[a][e].length;r++){const n=t[a][e][r],o=i[s][e][r];if(n.value!==o.value||n.from!==o.from||n.to!==o.to)return!1}}}return!0}function z(e,t){return"string"!=typeof e&&(e=e.toString()),t++,e.length>=t?e:`${Array(t-e.length).join(" ")}${e}`}var D=$,H=I,K=_;class L extends Error{}L.prototype.name="SiteswapError";const J={schedules:new Map,strings:new Map};class M{constructor(e){if(!Array.isArray(e)||!e.every(Array.isArray))throw new Error("Invalid schedule.");let t=J.schedules.get(e);if(t)return t;const i=e.map(e=>e.join(",")).join("-");return t=J.strings.get(i),t?t:void(J.schedules.set(e,this),J.strings.set(i,this),this.schedule=e)}advance(e){const t=this.schedule.map(e=>e.slice(1));for(let i=0;i<e.length;i++){const r=e[i];if(r.filter(({value:e})=>e).length!==(this.schedule[i][0]||0))throw new Error("Invalid action.");if(r.length)for(const{value:e,to:i}of r)if(!(0>=e)){t[i][e-1]=(t[i][e-1]||0)+1;for(let i=0;i<t.length;i++)for(let r=this.schedule[0].length-1;r<e;r++)t[i][r]||(t[i][r]=0)}}return new M(t)}}const N={a:97,A:65};let O=!0;const te={ws(){return{allow:" "}},trim(e){const t=te.ws();return{symbols:[t,e,t],processor:([,e])=>e}},separator(){if(O){const e=te.ws();return{either:[{symbols:[e,",",e]}," "],fixed:!0}}return{either:[","," "],fixed:!0}},separated(e,t,i){return{symbols:[i,{repeat:[e,i],min:t-1,max:1/0}],processor:([e,[...t]])=>[e,...t.map(([,e])=>e)]}},release(e,t){const i=te.separated(t,2,e);return{either:[{symbols:[e]},{symbols:["[",O?te.trim(i):i,"]"],processor:([,e])=>e}]}},asyncSiteswap(e,t){return{symbol:te.separated(t,1,te.release(e,t)),processor:e=>e.map(e=>[e])}},syncSiteswap(i,r,s){const a=te.ws(),n=te.release(i,r);return O?{symbols:[te.separated(a,1,{symbols:["(",a,n,s,n,a,")"],processor:([,,e,,t])=>[e,t]}),a,{allow:"*"}],processor:([e,,i])=>i?t(e):e}:{symbols:[te.separated(null,1,{symbols:["(",n,s,n,")"],processor:([,e,,t])=>[e,t]}),{allow:"*"}],processor:([e,i])=>i?t(e):e}}},Q=[{tokenType:"[",regex:"\\["},{tokenType:"]",regex:"\\]"},{tokenType:"(",regex:"\\("},{tokenType:")",regex:"\\)"},{tokenType:"<",regex:"<"},{tokenType:">",regex:">"},{tokenType:"\n",regex:"\n"},{tokenType:"|",regex:"\\|"},{tokenType:"-",regex:"-"},{tokenType:",",regex:","},{tokenType:" ",regex:" +"},{tokenType:"*",regex:"\\*"},{tokenType:"x",regex:"x",processor:()=>!0},{tokenType:"pN",regex:"p(?:[1-9][0-9]*|0)",processor:e=>r(e.slice(1))},{tokenType:"p",regex:"p",processor:()=>!0},{tokenType:"digit",regex:"[0-9]",processor:r},{tokenType:"digit_even",regex:"[02468]",processor:r},{tokenType:"letter",regex:"[a-zA-Z]",processor:n},{tokenType:"letter_even",regex:"[acegikmoqsuwyACEGIKMOQSUWY]",processor:n},{tokenType:"letter_capital",regex:"[A-Z]"},{tokenType:"integer",regex:"[1-9][0-9]*|[0-9]",processor:r},{tokenType:"integer_even",regex:"[1-9][0-9]*[02468]|[02468]",processor:r}],R={standard_async:()=>(O=!0,{symbol:te.trim(te.asyncSiteswap("integer",te.separator())),processor:u}),compressed_async:()=>(O=!1,{symbol:te.trim(te.asyncSiteswap({either:["digit","letter"]},null)),processor:u}),standard_sync:()=>{O=!0;const e=te.separator();return{symbol:te.trim(te.syncSiteswap({symbols:["integer_even",{allow:"x"}],processor:([e,t])=>({value:e,cross:!!t})},e,e)),processor:v}},compressed_sync:()=>{O=!1;const e={allow:te.separator(),fixed:!0};return{symbol:te.trim(te.syncSiteswap({symbols:[{either:["digit_even","letter_even"]},{allow:"x"}],processor:([e,t])=>({value:e,cross:!!t})},null,e)),processor:v}},multihand:()=>{O=!0;const e=te.ws(),t=te.trim(","),i=te.trim("\n");return{symbol:te.trim({either:[te.separated(i,1,te.separated(t,1,te.release({symbols:[{either:[{symbols:[{repeat:[{symbol:"letter_capital",fixed:!0,value:"A"}],min:1,max:1/0},{allow:["letter_capital"]}],processor:([e,t])=>t?[...e,t].join(""):e.join("")},"letter_capital"],processor:p},"integer"],processor:([e,t])=>({value:t,hand:e})},t))),te.separated(i,1,te.separated(e,1,te.release({symbols:["(",e,{allow:"-"},"integer",e,",",e,"integer",e,")"],processor:([,,e,t,,,,i])=>({value:i,offset:e?-t:t})},e)))]}),processor:w}},passing_async:()=>{O=!0;const e=te.trim(te.asyncSiteswap({symbols:["integer",{allow:"p"}],processor:([e,t])=>({value:e,pass:t})},te.separator())),t=te.trim(te.asyncSiteswap({symbols:["integer",{allow:"pN"}],processor:([e,t])=>({value:e,pass:t})},te.separator()));return{symbol:te.trim({either:[{symbols:["<",e,"|",e,">"],processor:([,e,,t])=>[e,t]},{symbols:["<",te.separated("|",2,t),">"],processor:([,e])=>e}]}),processor:x}},passing_sync:()=>{O=!0;const t=te.separator(),i=te.separator(),r=te.separator(),s=te.separator(),a=te.trim({either:[te.syncSiteswap({symbols:["integer_even",{allow:"x"},{allow:"p"}],processor:([e,t,i])=>({value:e,pass:i,cross:t})},t,t),te.syncSiteswap({symbols:["integer_even",{allow:"p"},{allow:"x"}],processor:([e,t,i])=>({value:e,pass:t,cross:i})},i,i)]}),e=te.trim({either:[te.syncSiteswap({symbols:["integer_even",{allow:"x"},{allow:"pN"}],processor:([e,t,i])=>({value:e,pass:i,cross:t})},r,r),te.syncSiteswap({symbols:["integer_even",{allow:"pN"},{allow:"x"}],processor:([e,t,i])=>({value:e,pass:t,cross:i})},s,s)]});return{symbol:te.trim({either:[{symbols:["<",a,"|",a,">"],processor:([,e,,t])=>[e,t]},{symbols:["<",te.separated("|",2,e),">"],processor:([,e])=>e}]}),processor:y}}};for(let e=0;e<Q.length;e++){const t=Q[e];t.index=e,R[t.tokenType]=t}const S={ERROR:!0};let T,ie=0;const re={"standard:async":{limits:{degree:{min:1,max:1}},hands:()=>["Hand"],parse:e=>b("standard_async",e),unparse:function(e){return e.map(([e])=>{const t=e.map(({value:e})=>e).join(",");return 1<e.length?`[${t}]`:t}).join(",")}},"standard:sync":{limits:{degree:{min:2,max:2}},hands:()=>["Left","Right"],parse:e=>b("standard_sync",e),unparse:function(e){return e.map(e=>{const t=e.map(e=>{const t=e.map(({value:e,from:t,to:i})=>`${2*e}${t===i?"":"x"}`).join(",");return 1<e.length?`[${t}]`:t});return`(${t})`}).join("")}},standard:["standard:async","standard:sync"],"compressed:async":{limits:{degree:{min:1,max:1},greatestValue:{max:61}},hands:()=>["Hand"],parse:e=>b("compressed_async",e),unparse:function(e){return e.map(([e])=>{const t=e.map(({value:e})=>9<e?o(e):e).join("");return 1<e.length?`[${t}]`:t}).join("")}},"compressed:sync":{limits:{degree:{min:2,max:2},greatestValue:{max:30}},hands:()=>["Left","Right"],parse:e=>b("compressed_sync",e),unparse:function(e){return e.map(e=>{const t=e.map(e=>{const t=e.map(({value:e,from:t,to:i})=>(e*=2,`${9<e?o(e):e}${t===i?"":"x"}`)).join("");return 1<e.length?`[${t}]`:t});return`(${t})`}).join("")}},compressed:["compressed:async","compressed:sync"],"passing:async":{limits:{degree:{min:2}},hands:e=>Array(e).fill().map((e,t)=>`juggler ${t+1}`),parse:e=>b("passing_async",e),unparse:function(e){const t=e[0].map((t,i)=>e.map(e=>{const t=e[i],r=t.map(({value:e,from:t,to:i})=>`${e}${t===i?"":`p${i+1}`}`).join(",");return 1<t.length?`[${r}]`:r}).join(",")).join("|");return`<${t}>`}},"passing:sync":{limits:{degree:{min:4,step:2}},hands:e=>Array(e).fill().map((e,t)=>`juggler ${K(t/2)+1}, hand ${t%2+1}`),parse:e=>b("passing_sync",e),unparse:function(e){const t=[];for(let i=0,[{length:r}]=e;i<r;i+=2)t.push(e.map(e=>`(${C(e[i])},${C(e[i+1])})`).join(""));return`<${t.join("|")}>`}},passing:["passing:async","passing:sync"],multihand:{hands:e=>Array(e).fill().map((e,t)=>c(t)),parse:e=>b("multihand",e),unparse:function(e){return e[0].map((t,i)=>e.map(e=>{const t=e[i],r=t.map(({value:e,to:t})=>`${c(t)}${e}`).join(",");return 1===t.length?r:`[${r}]`}).join(",")).join("\n")}}};class Siteswap{constructor(t,i="compressed"){try{const{throws:r,notation:e}=E(t,[].concat(i));Z(r),this.valid=!0,this.notation=e,this.throws=a(r)}catch(e){if(!(e instanceof L))throw e;return this.valid=!1,this.input=[t,i],this.error=e.message,this}const{throws:r}=this,e=r.reduce((e,t)=>e.concat(...t.map(e=>e.map(({value:e})=>e))),[]);this.degree=r[0].length,this.props=e.reduce((e,t)=>e+t)/r.length,this.multiplex=r.reduce((e,t)=>D(e,...t.map(({length:e})=>e)),0),this.greatestValue=D(...e),this.states=d(this),this.strictStates=f(this),this.orbits=g(this),this.composition=l(this),this.period=this.states.length,this.fullPeriod=this.strictStates.length,this.prime=1===this.composition.length,this.groundState=this.states.some(F)}}return Siteswap.prototype.equals=function(e){if(!this.valid)throw new L("Invalid siteswap.");if(!(e instanceof Siteswap)||!e.valid)return!1;const t=this.throws,i=e.throws;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(G(t,i,r))return!0;return!1},Siteswap.prototype.rotate=function(e=1){if(!this.valid)throw new L("Invalid siteswap.");const{throws:t}=this;return 0>e&&(e=t.length+e%t.length),new Siteswap(t.map((i,r)=>t[(r+e)%t.length]),this.notation)},Siteswap.prototype.toString=function(e=this.notation){if(!this.valid)throw new L("Invalid siteswap.");if(null===e)return JSON.stringify(this.throws);if(!re[e]||Array.isArray(re[e]))throw new L("Unsupported notation.");if(this.notation!==e){const t=re[this.notation].limits||{},i=re[e].limits||{},r=Object.keys(i);if(r.some(e=>void 0!==i[e]&&void 0!==t[e]&&(void 0!==i[e].min&&void 0!==t[e].max&&i[e].min>t[e].max||void 0!==i[e].max&&void 0!==t[e].min&&i[e].max<t[e].min)))throw new L("Incompatible notations.");if(r.some(e=>i[e].max&&this[e]>i[e].max||i[e].min&&this[e]<i[e].min||0!=this[e]%(i[e].step||1)))throw new L("This siteswap can't be converted to the target notation.")}return re[e].unparse(this.throws)},Siteswap.prototype.log=function(){if(!this.valid)return void console.log("Invalid siteswap.");const t=[];let i;if(t.push(`siteswap\n ${this.toString().replace(/\n/g,"\n ")}`),t.push(`notation\n ${this.notation}`),t.push(`degree\n ${this.degree}`),t.push(`props\n ${this.props}`),t.push(`period\n ${this.period}`),t.push(`full period\n ${this.fullPeriod}`),t.push(`multiplex\n ${this.multiplex}`),t.push(`prime\n ${this.prime}`),t.push(`ground state\n ${this.groundState}`),2<this.degree){i=Array(this.degree).fill().map((e,t)=>c(t)),t.push("hand labels");const r=re[this.notation].hands(this.degree),s=[];s.push(this.degree.toString().length+1),s.push(D(...r.map(({length:e})=>e))),s.push(D(...i.map(({length:e})=>e)));for(let a=0;a<this.degree;a++){const e=z(a+1,s[0]),n=z(i[a],s[2]),o=z(r[a],s[1]);t.push(`${e}| ${n}${"multihand"===this.notation?"":` (${o})`}`)}}{t.push("throw sequence");const r=[];for(const[t,s]of this.throws.entries()){const a=s.map(e=>{let t;return t=2>=this.degree?e.map(({value:e,from:t,to:i})=>`${e}${t===i?"":"x"}`).join(","):e.map(({value:e,to:t})=>`${e}${i[t]}`).join(","),1===e.length?t:`[${t}]`});r.push([`${t+1}|`,...a])}const e=[];for(let t=0;t<r[0].length;t++)e.push(D(...r.map(e=>e[t].length+1)));t.push(...r.map(t=>t.map((t,i)=>z(t,e[i])).join("")))}{t.push("states");const i=this.period.toString().length+1;for(const[r,s]of this.states.entries())for(const[a,e]of s.entries())t.push(`${z(a?" ":r+1,i)}| [${e.join(",")}]`)}{t.push("strict states");const i=this.fullPeriod.toString().length+1;for(const[r,s]of this.strictStates.entries())for(const[a,e]of s.entries())t.push(`${z(a?"":r+1,i)}| [${e.map(e=>`[${e.length?e.join(","):"-"}]`).join(",")}]`)}{t.push("orbits");const e=this.orbits.length.toString().length+1;for(const[i,r]of this.orbits.entries())t.push(...r.toString().split("\n").map((t,r)=>`${z(r?"":i+1,e)}| ${t}`))}{t.push("composition");const e=this.composition.length.toString().length+1;for(const[i,r]of this.composition.entries())t.push(...r.toString().split("\n").map((t,r)=>`${z(r?"":i+1,e)}| ${t}`))}t.push(" "),console.log(t.join("\n"))},Siteswap})});const Z=Symbol.for("settings");class Q{constructor(e){this.callback=e,this.update=this.update.bind(this),this.request=window.requestAnimationFrame(this.update),this.timestamp=null}update(e){const t=this.timestamp?e-this.timestamp:0;this.timestamp=e,this.request=window.requestAnimationFrame(this.update),this.callback(t)}kill(){window.cancelAnimationFrame(this.request)}}class X{constructor(e){this.position={x:NaN,y:NaN},this.color=e,this.animationAt=-1,this.animations=[],this.elapsed=0}update(e,t=!1){const{animations:i}=this;t&&(this.animationAt=-1,this.elapsed=0),this.elapsed+=e;let r=i[this.animationAt];for(;this.elapsed>=r.duration;)this.animationAt=(this.animationAt+1)%i.length,this.elapsed-=r.duration,r=i[this.animationAt];this.position=r.getPosition(this.elapsed)}draw(e,t){var i=Math.PI;const r=t.ballRadius*t.multiplier;const s=this.position.x*t.multiplier;const a=this.position.y*t.multiplier;e.beginPath(),e.arc(s,a,r,0,2*i),e.fillStyle=this.color,e.globalAlpha=0<this.position.y?.9:.55,e.fill(),e.closePath()}}class K{constructor(e){this.coefficients=e}at(e){return this.coefficients.reduce((t,i)=>i+e*t)}differentiate(){return new K(this.coefficients.slice(0,-1).map((e,t,{length:i})=>(i-t)*e))}}const Y={s:(e,i,r)=>e*r+.5*i*r*r,v:(e,t,i)=>v(e*e+2*t*i)};const J={x:0,y:-9.81/1e3};const ee=new class{constructor(e,t=0,i=0){this.polynomials=[],this.xs=e.map(({x:e})=>e),this.ys=e.map(({y:e})=>e);const r=this.xs.length;const s=[];const a=[];const n=[];const o=[];const l=[];for(let n=0;n<r-1;n++)s[n]=this.xs[n+1]-this.xs[n],a[n]=(this.ys[n+1]-this.ys[n])/s[n];n[0]=2*(s[0]+s[1]),o[0]=6*(a[1]-a[0]);for(let l=1;l<r-1;l++)n[l]=2*(s[l]+s[l-1])-s[l-1]*s[l-1]/n[l-1],o[l]=6*(a[l]-a[l-1])-s[l-1]*o[l-1]/n[l-1];l[0]=t,l[r-1]=i;for(let a=r-2;0<a;a--)l[a]=(o[a]-s[a]*l[a+1])/n[a];for(let n=0;n<r-1;n++){const e=this.ys[n];const t=-(s[n]*l[n+1]/6)-s[n]*l[n]/3+(this.ys[n+1]-this.ys[n])/s[n];const i=l[n]/2;const r=(l[n+1]-l[n])/(6*s[n]);this.polynomials.push(new K([r,i,t,e]))}}at(e){const{xs:t}=this;const r=this.polynomials.length;const s=k(t[0],t[r]);const a=$(t[0],t[r]);if(e<s||e>a)throw new Error("Out of bounds.");let n=0;if(t[0]<t[r])for(;n<r&&e>t[n+1];)n++;else for(;n<r&&e<t[n+1];)n++;return this.polynomials[n].at(e-t[n])}maximum(){const e={x:null,y:null};const{xs:t}=this;for(let r=0;r<this.polynomials.length;r++){const i=this.polynomials[r].differentiate();const[s,a,n]=i.coefficients;const o=v(a*a-4*s*n);const l=(-a+o)/(2*s)+t[r];const d=(-a-o)/(2*s)+t[r];const p=k(t[r],t[r+1]);const h=$(t[r],t[r+1]);if(l>=p&&l<=h){const t=this.at(l);t>e.y&&(e.x=l,e.y=t)}if(d>=p&&d<=h){const t=this.at(d);t>e.y&&(e.x=d,e.y=t)}}return e}}([{x:0,y:0},{x:5,y:30},{x:30,y:100},{x:95,y:30},{x:100,y:0}]);const te={catch:function(e){const t=e/this.duration;const i={x:this.position.x+t*this.width,y:this.position.y-ee.at(100*t)*this.yModifier};return i},throw:function(e){const t={x:this.position.x+Y.s(this.velocity.x,this.acceleration.x,e),y:this.position.y+Y.s(this.velocity.y,this.acceleration.y,e)};return t},wait:function(){return this.position}};const ie=Symbol.for("settings");const re=Symbol.for("virtual");const se=Symbol.for("settings");const ae=Symbol.for("balls");const ne=Symbol.for("virtual");const oe=Symbol.for("settings");const le=Symbol.for("balls");const de=Symbol.for("loop");const pe=Symbol.for("balls");const he=Symbol.for("loop");const ue=Symbol.for("balls");const ce=Symbol.for("balls");const fe=Symbol.for("settings");const ge=Symbol.for("settings");var me=d(function(e){(function(t){e.exports=t()})(function(){return function d(p,e,t){function r(i,n){if(!e[i]){if(!p[i]){var o="function"==typeof l&&l;if(!n&&o)return o(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var h=e[i]={exports:{}};p[i][0].call(h.exports,function(t){var e=p[i][1][t];return r(e?e:t)},h,h.exports,d,p,e,t)}return e[i].exports}var s="function"==typeof l&&l;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function s(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function n(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,s,o,l,d,p;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length))if(t=arguments[1],t instanceof Error)throw t;else{var h=new Error("Uncaught, unspecified \"error\" event. ("+t+")");throw h.context=t,h}if(s=this._events[e],n(s))return!1;if(r(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),s.apply(this,l);}else if(a(s))for(l=Array.prototype.slice.call(arguments,1),p=s.slice(),o=p.length,d=0;d<o;d++)p[d].apply(this,l);return!0},i.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(s=n(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,s&&0<s&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function i(){this.removeListener(e,i),s||(s=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var s=!1;return i.listener=t,this.on(e,i),this},i.prototype.removeListener=function(e,t){var s,n,o,l;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=this._events[e],o=s.length,n=-1,s===t||r(s.listener)&&s.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(s)){for(l=o;0<l--;)if(s[l]===t||s[l].listener&&s[l].listener===t){n=l;break}if(0>n)return this;1===s.length?(s.length=0,delete this._events[e]):s.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],r(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t){var i,r,s,a,n;n=navigator.userAgent.toLowerCase(),a=navigator.platform.toLowerCase(),i=n.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],s="ie"===i[1]&&document.documentMode,r={name:"version"===i[1]?i[3]:i[1],version:s||parseFloat("opera"===i[1]&&i[4]?i[4]:i[2]),platform:{name:n.match(/ip(?:ad|od|hone)/)?"ios":(n.match(/(?:webos|android)/)||a.match(/mac|win|linux/)||["other"])[0]}},r[r.name]=!0,r[r.name+parseInt(r.version,10)]=!0,r.platform[r.platform.name]=!0,t.exports=r},{}],3:[function(e,t){var i,r,s,a=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty,o=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1},l=[].slice;i=e("events").EventEmitter,s=e("./browser.coffee"),r=function(e){function t(e){var t,r,s;for(r in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e),i)s=i[r],null==(t=this.options)[r]&&(t[r]=s)}var i,r;return a(t,e),i={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},r={delay:500,copy:!1,dispose:-1},t.prototype.setOption=function(e,t){if(this.options[e]=t,null!=this._canvas&&("width"===e||"height"===e))return this._canvas[e]=t},t.prototype.setOptions=function(e){var t,i,r;for(t in i=[],e)n.call(e,t)&&(r=e[t],i.push(this.setOption(t,r)));return i},t.prototype.addFrame=function(e,t){var i,s;for(s in null==t&&(t={}),i={},i.transparent=this.options.transparent,r)i[s]=t[s]||r[s];if(null==this.options.width&&this.setOption("width",e.width),null==this.options.height&&this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!==ImageData&&e instanceof ImageData)i.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?i.data=this.getContextData(e):i.context=e;else if(null!=e.childNodes)t.copy?i.data=this.getImageData(e):i.image=e;else throw new Error("Invalid image");return this.frames.push(i)},t.prototype.render=function(){var e,t,r,s;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,i,r;for(r=[],e=t=0,i=this.frames.length;0<=i?t<i:t>i;e=0<=i?++t:--t)r.push(null);return r}.call(this),r=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=t=0,s=r;0<=s?t<s:t>s;e=0<=s?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},t.prototype.abort=function(){for(var e;e=this.activeWorkers.shift(),null!=e;)this.log("killing active worker"),e.terminate();return this.running=!1,this.emit("abort")},t.prototype.spawnWorkers=function(){var e,t,i;return e=k(this.options.workers,this.frames.length),function(){i=[];for(var r=t=this.freeWorkers.length;t<=e?r<e:r>e;t<=e?r++:r--)i.push(r);return i}.apply(this).forEach(function(e){return function(t){var i;return e.log("spawning worker "+t),i=new Worker(e.options.workerScript),i.onmessage=function(t){return e.activeWorkers.splice(e.activeWorkers.indexOf(i),1),e.freeWorkers.push(i),e.frameFinished(t.data)},e.freeWorkers.push(i)}}(this)),e},t.prototype.frameFinished=function(e){var t,r,s;if(this.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,!0===this.options.globalPalette&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),2<this.frames.length))for(t=r=1,s=this.freeWorkers.length;1<=s?r<s:r>s;t=1<=s?++r:--r)this.renderNextFrame();return 0<=o.call(this.imageParts,null)?this.renderNextFrame():this.finishRendering()},t.prototype.finishRendering=function(){var e,t,r,s,a,n,o,d,p,h,u,c,f,g,m,y;for(d=0,g=this.imageParts,(a=0,p=g.length);a<p;a++)t=g[a],d+=(t.data.length-1)*t.pageSize+t.cursor;for(d+=t.pageSize-t.cursor,this.log("rendering finished - filesize "+b(d/1e3)+"kb"),e=new Uint8Array(d),c=0,m=this.imageParts,(n=0,h=m.length);n<h;n++)for(t=m[n],y=t.data,(r=o=0,u=y.length);o<u;r=++o)f=y[r],e.set(f,c),c+=r===t.data.length-1?t.cursor:t.pageSize;return s=new Blob([e],{type:"image/gif"}),this.emit("finished",s,e)},t.prototype.renderNextFrame=function(){var e,t,i;if(0===this.freeWorkers.length)throw new Error("No free workers");return this.nextFrame>=this.frames.length?void 0:(e=this.frames[this.nextFrame++],i=this.freeWorkers.shift(),t=this.getTask(e),this.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(i),i.postMessage(t))},t.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},t.prototype.getImageData=function(e){var t;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),t=this._canvas.getContext("2d"),t.fillStyle=this.options.background,t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),this.getContextData(t)},t.prototype.getTask=function(e){var t,i;if(t=this.frames.indexOf(e),i={index:t,last:t===this.frames.length-1,delay:e.delay,dispose:e.dispose,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===s.name},null!=e.data)i.data=e.data;else if(null!=e.context)i.data=this.getContextData(e.context);else if(null!=e.image)i.data=this.getImageData(e.image);else throw new Error("Invalid frame");return i},t.prototype.log=function(){var e;return e=1<=arguments.length?l.call(arguments,0):[],this.options.debug?console.log.apply(console,e):void 0},t}(i),t.exports=r},{"./browser.coffee":2,events:1}]},{},[3])(3)})});const ye=Symbol.for("settings");const ve=Symbol.for("loop");let be=null;const xe=Symbol.for("settings");const we=Symbol.for("balls");const _e=Symbol.for("loop");const ke=Symbol.for("virtual");class Animator{constructor(e,t={}){if(this[ke]=!1,"string"==typeof e&&(e=document.getElementById(e)),!(e instanceof HTMLCanvasElement))if("object"==typeof e&&e.width&&e.height){const{width:t,height:i}=e;e=document.createElement("canvas"),e.width=t,e.height=i,this[ke]=!0}else throw new Error("Canvas element not supplied.");this.context=e.getContext("2d"),this.siteswap=null,this.paused=!1,this[_e]=null,this[we]=[],this[xe]={dwell:.5,slowdown:1,reversed:!1,continuous:!0,ballColor:"#ff3636",beatDuration:300,ballRadius:70,catchWidth:400,innerHeight:0,innerWidth:0,catchHeight:0,multiplier:null},this.configure(t)}}return Animator.Siteswap=V,Animator.prototype.play=function(e){if(this.paused=!1,void 0!==e){this[de]&&this.stop();const{Siteswap}=this.constructor;if("string"==typeof e&&(e=new Siteswap(e)),this.siteswap=e,!(e instanceof Siteswap))throw new Error("Invalid input.");if(!e.valid)throw new Error("Invalid siteswap.");if(2<e.degree)throw new Error(`Pattern requires ${e.degree} hands.`);if(0!==e.greatestValue){const t=this[oe];const[i,{innerWidth:r,innerHeight:s,catchHeight:a}]=c(t,e);t.innerWidth=r,t.innerHeight=s,t.catchHeight=a,this[le]=i,f(this,!1),this[oe].continuous&&this.seek(0,!0),this[de]=new Q(e=>m(this,e))}}},Animator.prototype.stop=function(){const e=this[he];e&&(g(this.context),e.kill(),this[he]=null,this[pe].length=0,this.siteswap=null)},Animator.prototype.pause=function(){this.paused=!0},Animator.prototype.configure=function(e){const t=this[Z];void 0!==e.beatDuration&&(t.beatDuration=e.beatDuration),void 0!==e.slowdown&&(t.slowdown=e.slowdown),void 0!==e.dwell&&(t.dwell=e.dwell),void 0!==e.ballColor&&(t.ballColor=e.ballColor),void 0!==e.reversed&&(t.reversed=e.reversed),void 0!==e.continuous&&(t.continuous=e.continuous);const{beatDuration:i,dwell:r,slowdown:s,ballColor:a,reversed:n,continuous:o}=t;if("number"!=typeof i)throw new Error("Invalid configuration (`beatDuration` must be a number).");if(0>=i)throw new Error("Invalid configuration (`beatDuration` must be positive).");if("number"!=typeof s)throw new Error("Invalid configuration (`slowdown` must be a number).");if(0>=s)throw new Error("Invalid configuration (`slowdown` must be positive).");if("number"!=typeof r)throw new Error("Invalid configuration (`dwell` must be a number).");if(0>r||1<r)throw new Error("Invalid configuration (`dwell` must be in [0-1] range).");if("string"!=typeof a)throw new Error("Invalid configuration (`ballColor` must be a string).");if(!/^#[0-9a-f]{3}(?:[0-9a-f]{3})?/i.test(a))throw new Error("Invalid configuration (`ballColor` must be a valid css color).");if("boolean"!=typeof n)throw new Error("Invalid configuration (`reversed` must be a boolean).");if("boolean"!=typeof o)throw new Error("Invalid configuration (`continuous` must be a boolean).")},Animator.prototype.dye=function(e,t){const i=this[ue];if(void 0===t)for(const t of i)t.color=e;else{if(!i[t])throw new Error("Ball doesn't exist.");i[t].color=e}},Animator.prototype.seek=function(e,t=!1){if("number"!=typeof e||0>e||100<e)throw new Error("Expected number in [0-100] range.");100===e&&(e=0),t&&(e+=100);const i=this[fe];const r=this[ce];const s=this.siteswap.fullPeriod*(this.siteswap.fullPeriod%2?2:1)*i.beatDuration;for(const i of r)i.update(e/100*s,!0)},Animator.prototype.toGIF=function(e){const{canvas:t}=this.context;const i={width:t.width,height:t.height};return Animator.toGIF(this.siteswap,Object.assign(i,this[ge],e))},Animator.toGIF=y,Animator}();